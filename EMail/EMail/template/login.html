<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Email</title>
    <style>
        .contain{
            border-radius: 10px;
            margin-top: 100px;
            margin-left: 450px;
            border: solid 0px red;
            width: 600px;
            height: 400px;
        }

        .bg{
            background-image: url("../resource/imgs/backgroundimg.jpg");
            background-repeat:no-repeat;
            background-attachment: fixed;
            background-size:100% 100%;
        }
    </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
<script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.2.1/jquery.min.js"></script>
</head>
<body class="bg">
<div align="center" style="font-size: 36px;color: red">
</div>
<div class="contain" style="box-shadow: 1px 1px 10px black">
    <div class="top" style="width: 600px;height: 120px;background-color: lightskyblue;border-radius: 10px 10px 0px 0px;">
        <div align="center" style="font-size: 36px;padding-top: 25px;">
            Email
        </div>
    </div>
    <div class="info" align="center" style="background: aliceblue;height: 280px;border-radius: 0px 0px 10px 10px">
        <br>
        <br>
        <div>
        <form   method="post">
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
        </svg>
        <input type="text" name="account"  id="account" required="required" style="width: 250px;height: 25px;" placeholder="请输入邮箱">
        <br>
        <br>
        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lock-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/>
            <path fill-rule="evenodd" d="M4.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
        </svg>
        <input type="password" name="password" id="password" required="required" style="width: 250px;height: 25px;" placeholder="密码">
        <br>
        <br>

        </form>
        </div>
        <button   class="button btn-success" style="width: 100px;margin-left: 150px" onclick="doLogin()">登录</button>


        <div align="center" style="padding-top: 30px">
            <a href="/toReg">还没有账号？立即注册</a>
        </div>
    </div>
</div>


</body>
<script>
    function doLogin() {
        var account =$("#account").val();
        var password =$("#password").val();
        if (account == null || account == ''){
            alert("邮箱不能为空！");
            return false;
        }
        if (password == null || password == ''){
            alert("密码不能为空！");
            return false;
        }
    $.post({
            url:"/login",
            data:{
                "account":$("#account").val(),
                "password":$("#password").val(),
        },
            success:function (data) {
                if(data == 'user-not-find'){
                    alert("账户不存在!");
                    return false;
                }else if (data == 'login-fail'){
                    alert("密码错误，请重试！");
                    return false;
                }
                else if (data == 'login-pass'){
                    alert("登录成功！");
                    location.href='/index';
                }else{
                    alert("出错了，请重试！");
                    return false;
                }
            }
        },
    )
}
</script>
</html>